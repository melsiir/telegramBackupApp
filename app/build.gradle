plugins {
    id 'com.android.application'
    // id 'org.jetbrains.kotlin.android'
}

apply plugin: 'com.chaquo.python'

android {
    namespace 'com.example.telegrambackup'
    compileSdk 34

    signingConfigs {
        release {
            storeFile file("release.jks")
            storePassword System.getenv("KEYSTORE_PASSWORD")
            keyAlias System.getenv("KEY_ALIAS")
            keyPassword System.getenv("KEY_PASSWORD")
        }
    }

    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled false
        }
    }



    defaultConfig {
        applicationId "com.example.telegrambackup"
        minSdk 24
        targetSdk 34
        versionCode 1
        versionName "1.0"
    }

    buildFeatures {
        compose true
    }

    composeOptions {
        kotlinCompilerExtensionVersion '1.5.1'
    }

    packagingOptions {
        pickFirst '**/*.so'
    }
}

python {
    buildPython "python3.11"
    createStubs = true

    pip {
        install "telethon"
    }

    src "src/main/python"
}

dependencies {
    implementation platform('androidx.compose:compose-bom:2024.02.00')
    implementation 'androidx.compose.material3:material3'
    implementation 'androidx.compose.ui:ui'
    implementation 'androidx.compose.ui:ui-tooling-preview'
    implementation 'androidx.activity:activity-compose:1.9.0'

    implementation 'androidx.security:security-crypto:1.1.0-alpha06'
}
